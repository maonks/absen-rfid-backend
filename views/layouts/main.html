

<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Absensi RFID</title>

  <!-- HTMX -->
  <script src="https://unpkg.com/htmx.org@1.9.10"></script>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-100" hx-boost="false">

<div class="flex min-h-screen">

      <!-- SIDEBAR -->
      <aside
        id="sidebar"
        class="bg-slate-900 text-white
              w-56
              min-h-screen
              flex flex-col
              relative"
      >

        <!-- LOGO / HEADER -->
        <div class="p-4 text-lg font-bold text-center border-b border-slate-700">
          ğŸ“¡ Absensi RFID
        </div>

        <!-- MENU -->
        <nav class="flex-1 mt-4 space-y-1">

          <a
            href="/"
            hx-boost="false"
            class="flex items-center gap-3 px-4 py-3
                  text-white
                  hover:bg-slate-700 transition"
          >
            <span class="text-lg">ğŸ </span>
            <span>Monitoring</span>
          </a>

          <a
            href="/riwayat"
            hx-boost="false"
            class="flex items-center gap-3 px-4 py-3
                  text-white
                  hover:bg-slate-700 transition"
          >
            <span class="text-lg">ğŸ‘¨â€ğŸ“</span>
            <span>Riwayat Absensi</span>
          </a>

          <a
            href="/absensi"
            hx-boost="false"
            class="flex items-center gap-3 px-4 py-3
                  text-white
                  hover:bg-slate-700 transition"
          >
            <span class="text-lg">ğŸ“Š</span>
            <span>Detail Absensi</span>
          </a>

        </nav>

        <!-- FOOTER -->
        <div class="p-3 text-xs text-center text-slate-400 border-t border-slate-700">
          Â© 2026 RFID System
        </div>

      </aside>


    <!-- FOOTER -->
    <div class="p-3 text-xs text-center text-slate-400">
      <span class="hidden group-hover:block">
        Â© 2026 RFID System
      </span>
    </div>
  </aside>

  <!-- Untuk main embed page nya -->
<main class="flex-1 p-6">

  
  <div class="flex justify-between items-center mb-4">    
    <!-- KIRI -->
    <div>
      <h1 class="text-2xl font-bold">ğŸ“¡ Dashboard Absensi RFID</h1>
      <p class="text-sm text-gray-500">
        &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspÂ© 2026 maonks
      </p>
    </div>

    <!-- KANAN -->
    <div
      id="device-status"
      hx-get="/api/device-status"
      hx-trigger="load"
      class="flex gap-2"
    >
      â³ Memuat status device...
    </div>

  </div>

  
<div class="bg-white rounded-xl shadow p-6 space-y-4">

  {{ embed }}

</div>



</main>

</div>

<!-- untuk edit nama -->
<div id="modal"></div>

<script>
      function closeModal() {
        const modal = document.getElementById("modal");
        if (modal) modal.innerHTML = "";
      }
</script>

<script>
      // const ws = new WebSocket("ws://192.168.1.100:8000/websocket");
         const ws = new WebSocket("ws://wan2.adamulti.com:8000/websocket");

      ws.onopen = () => {
        console.log("âœ… WS CONNECTED");
      };

      ws.onmessage = (e) => {
        const absenTable = document.getElementById("absen-table");
        if (absenTable) {
          htmx.trigger(absenTable, "reload");
        }

        const kehadiran = document.getElementById("kehadiran-wrapper");
        if (kehadiran) {
          htmx.trigger(kehadiran, "reload");
        }
      };

      ws.onclose = () => {
        console.log("ğŸ”´ WS CLOSED");
      };
</script>

<!-- <script>
      const sidebar = document.getElementById("sidebar");
      const pinBtn = document.getElementById("pinBtn");

      // load state
      const pinned = localStorage.getItem("sidebarPinned") === "true";
      sidebar.dataset.pinned = pinned;

      // toggle pin
      pinBtn.addEventListener("click", () => {
        const isPinned = sidebar.dataset.pinned === "true";      

        sidebar.dataset.pinned = !isPinned;
        localStorage.setItem("sidebarPinned", !isPinned);

         pinBtn.textContent = sidebar.dataset.pinned === "true" ? "â®œâ®œ" : "â®â®";           

      });
      
      
</script> -->


</body>
</html>
